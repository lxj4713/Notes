<!-- toc -->
[toc]
<!-- toc -->

# DNS域名解析服务

## DNS简介

1. 域名和ip地址之间的解析转换
    正向解析： 域名 --> IP地址 (常用)
    方向解析： IP地址 --> 域名

2. 域名组成与分类
    |域名组成|分类|
    |-|-|
    |.|根域，可省略不写  |
    |com|顶级域，由ICANN组织指定和管理 <br>分类：<br>国家地区顶级域名：cn(中国）、hk(香港）、sg(新加坡）等 <br>通用项级域名：com(商业机构）、org(非营利组织）、edu(教育机构）gov（政府部门）、net（网络服务商）、pub（公共大众）等。<br>新通用顶级域名：red(红色、热情）、top(顶级、高端）等|
    |baidu,google |二级域（注册域）,可由个人或组织申请注册。|
    |www |三级域（子域）,服务器网站名代表。|
    |主机名|sl.www.baidu.com.中的s1 就是主机名，一般用来表示具体某一台主机|

3. DNS域名解析步骤
   1. 客户机首先查看查找本地hosts文件，如果有则返回，否则进行下一步。
   2. 客户机查看本地缓存，是否存在本条目的缓存，如果有则直接返回，否则进行下一步。
   3. 将请求转发给指向的DNS服务器。
   4. 查看域名是否本地解析，是则本地解析返回，否则进行下一步。
   5. 本地DNS服务器首先在缓存中查找，有则返回，无则进行下一步。（根域，顶级域，二级域）
   6. 向全球13个根域服务器发起DNS请求，根域返回org域的地址列表。
   7. 使用某一个org域的IP地址，发起DNS请求，ong域返回kemel域服务器地址列表。
   8. 使用某一个kemel域IP地址，发起DNS请求，kemel域返回www.kemelorg主机的IP地址，本
   地DNS服务收到后，返回给客户机，并在本地DNS服务器保存一份。

4. DNS服务
   软件名称： bind
   服务名称： named
   软件端口：UDP 53 数据通信（域名解析）
            TCP 53 数据同步（主从同步）
    配置文件： 
        1. 主配置文件 /etc/named.conf(服务器运行参数)


        2. 区域配置文件 /etc/named.rfc1912.zones(服务器解析的区域配置，正反向区域定义信息)
        3. 数据配置文件 /var/named/xxx.xxx
        4. 其他目录及文件： /var/named/named.ca   #保存了13台根服务器的位置
                         /var/named/slaves #从服务器的配置信息等